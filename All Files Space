EXEC sp_MSforeachdb '
USE [?];
SELECT ''?'' AS [Database Name], 
       name AS [File Name], 
       physical_name AS [Physical Name], 
       type_desc AS [File Type],
       size/128.0 AS [Total Size in MB], 
       size/128.0 - CAST(FILEPROPERTY(name, ''SpaceUsed'') AS int)/128.0 AS [Free Space in MB]
FROM sys.database_files;
';
